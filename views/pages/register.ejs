<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Register</title>
    <link rel="stylesheet" href="/public/stylesheets/mainSS.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
  </head> 
  <body>
    <div class="background">
      <br>
      <h1 class="header">Register</h1>
      <ul class="errors">
        <% if(typeof errors != 'undefined') { %>
          <% errors.forEach(error => { %>
            <li><%= error.message %></li>
          <% }) %>
        <% } %>
      </ul>
      <form action="/users/register" method="POST">
        <div>
          <input type="text" class="inputbox" id="fname" name="fname" placeholder="First Name" required /> 
          <i>&nbsp;&nbsp;&nbsp;&nbsp;</i>
        </div>
        <br>
        <div>
          <input type="text" class="inputbox" id="lname" name="lname" placeholder="Last Name" required /> 
          <i>&nbsp;&nbsp;&nbsp;&nbsp;</i>
        </div>
        <br>
        <div>
            <input type="email" class="inputbox" id="email" name="email" placeholder="Email" required />
            <i>&nbsp;&nbsp;&nbsp;&nbsp;</i>
        </div>
        <br>
        <div>
            <input type="password" class="inputbox" id="password" name="password" placeholder="Password" required /> 
            <i class="bi bi-eye-slash" id="togglePassword1">&nbsp;</i> <!-- eye icon from bootstrap-->
        </div>
        <br>
        <div>
            <input type="password" class="inputbox" id="confirmpw" name="confirmpw" placeholder="Confirm Password" required /> 
            <i class="bi bi-eye-slash" id="togglePassword2">&nbsp;</i> <!-- eye icon from bootstrap-->
        </div>
        <br>
        <div>
            <input type="submit" class="button" value="Register" />
        </div>
        <br>
        <a class="bottomlink" href="/users/login">Already registered? Login here</a>
        <br>
        <br>
      </form>
    </div>
    <script>
      var togglePassword1 = document.querySelector("#togglePassword1")
      var password = document.querySelector("#password")

      togglePassword1.addEventListener("click", function() {
          var type = password.getAttribute("type") === "password" ? "text" : "password" // swap current type
          password.setAttribute("type", type)
          togglePassword1.classList.toggle("bi-eye") // change icon's visual state
      })

      var togglePassword2 = document.querySelector("#togglePassword2")
      var confirmpw = document.querySelector("#confirmpw")

      togglePassword2.addEventListener("click", function() {
          var type = confirmpw.getAttribute("type") === "password" ? "text" : "password" // swap current type
          confirmpw.setAttribute("type", type)
          togglePassword2.classList.toggle("bi-eye") // change icon's visual state
      })
    </script>
  </body>
</html>
